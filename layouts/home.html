{{ define "main" }}
<div class="tier-list-container">
  {{ $tiers := slice "S" "A" "B" "C" "D" "E" "F" }}
  {{ range $tiers }}
    {{ $currentTier := . }}
    <div class="tier-row">
      <div class="tier-label tier-{{ $currentTier | lower }}">{{ $currentTier }}</div>
      <div class="tier-items">
        {{ range (where site.RegularPages "Params.tier" $currentTier).ByParam "position" }}
          <a href="#{{ .File.ContentBaseName }}" class="tier-item">
            <img src="{{ index .Params "image-url" }}" alt="{{ .Title }}">
          </a>
        {{ end }}
      </div>
    </div>
  {{ end }}
</div>

<!-- Dialogs for each post -->
{{ range site.RegularPages }}
<dialog id="{{ .File.ContentBaseName }}" class="post-dialog">
  <div class="dialog-content">
    <div class="dialog-header">
      <h2 style="color: var(--color-{{ .Params.tier | lower }})">{{ .Title }}</h2>
      <a href="#" class="close-button">&times;</a>
    </div>
    <div class="dialog-body">
      {{ if .Params.link }}
      <a href="{{ .Params.link }}" target="_blank" rel="noopener noreferrer">
        <img src="{{ index .Params "image-url" }}" alt="{{ .Title }}" class="dialog-image">
      </a>
      {{ else }}
        <img src="{{ index .Params "image-url" }}" alt="{{ .Title }}" class="dialog-image">
      {{ end }}
      
      <p><strong>Date Added:</strong> {{ .Date.Format "January 2, 2006" }}</p>
      
      <div class="post-content">
        {{ .Content }}
      </div>
      
      {{ with .GetTerms "tags" }}
      <div class="dialog-tags">
        {{ range . }}
          <a href="{{ .RelPermalink }}" class="tag">{{ .LinkTitle }}</a>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </div>
</dialog>
{{ end }}

{{ end }}